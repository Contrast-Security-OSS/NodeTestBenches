KrakenTestBench
===========

Intentionally Vulnerable Node Application

## Adding a shared vulnerability
Once you have added shared functionality to
[`@contrast/test-bench-utils`](https://github.com/Contrast-Security-OSS/test-bench-utils)
and
[`@contrast/test-bench-content`](https://github.com/Contrast-Security-OSS/test-bench-content),
you are ready to add an endpoint in the test bench application.

Create a _controllers/ruleName/index.js_ file and call the `controllerFactory` method:
```js
const controllerFactory = require('../../utils/controllerFactory');
module.exports = controllerFactory('ruleName');
```

Check the documentation for `controllerFactory` under _utils/controllerFactory.js_
usage information.

Create a _models/ruleName.js_ file that provides sink data generated by `@contrast/test-bench-utils`:
```js
const { utils } = require('@contrast/test-bench-utils');

module.exports = function CommandInjectionModel() {
  const sinkData = utils.getSinkData('ruleName', 'kraken');
  const routeMeta = utils.getRouteMeta('ruleName');

  return {
    ...routeMeta,
    sinkData
  };
};
```

Add a _public/templates/ruleName.ejs_ file that includes the shared
template from `@contrast/test-bench-content`:
```html
<% include ../../node_modules/@contrast/test-bench-content/views/ruleName.ejs %>
```

Now run the app and make sure everything works as expected!
